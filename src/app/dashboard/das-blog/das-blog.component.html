<h2 class="text-2xl mb-4">
  {{ title }}
</h2>

<!-- Add Blog Form -->
<div class="w-full md:w-full mb-5 shadow p-5 mt-12">
  <ngx-spinner
    bdColor="rgba(0, 0, 0, 0.8)"
    size="large"
    color="#fff"
    type="square-jelly-box"
    [fullScreen]="true"
  >
    <p style="color: white">Loading...</p>
  </ngx-spinner>

  <form (ngSubmit)="onSubmit()" [formGroup]="addForm">
    <!-- Title Input -->
    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="title"
        >Title</label
      >
      <input
        type="text"
        class="w-full px-3 py-2 border rounded"
        placeholder="Enter title"
        formControlName="name"
      />
      <small
        class="text-red-500"
        *ngIf="!addForm.get('name')?.valid && addForm.get('name')?.touched"
        >*Required Field</small
      >
    </div>

    <!-- Description Input -->
    <div class="mb-4">
      <label
        class="block text-gray-700 text-sm font-bold mb-2"
        for="description"
        >Description</label
      >
      <quill-editor formControlName="description"></quill-editor>
    </div>

    <!-- Banner Input -->
    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="blogImage"
        >Banner</label
      >
      <input type="file" (change)="onImageChange($event)" />
    </div>

    <!-- Is Feature Checkbox -->
    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="isFeature"
        >Is Feature?</label
      >
      <input
        type="checkbox"
        class="form-checkbox"
        formControlName="isFeature"
      />
    </div>

    <!-- Save Button -->
    <button
      type="submit"
      [disabled]="!addForm.valid"
      class="bg-info-500 hover:bg-info-700 text-white font-bold py-2 px-4 rounded"
    >
      Save
    </button>
  </form>
</div>

<div class="w-full shadow p-5 mb-16">
  <h3 class="text-2xl mb-5">Blog List</h3>
  <div class="overflow-x-auto">
    <table class="table-auto w-full border-collapse">
      <!-- Table Header -->
      <thead>
        <tr>
          <th class="px-4 py-2 border text-left">ID</th>
          <th class="px-4 py-2 border text-left">Title</th>
          <th class="px-4 py-2 border text-left">Image</th>
          <th class="px-4 py-2 border text-left">Is Feature?</th>
          <th class="px-4 py-2 border text-left">Update</th>
          <th class="px-4 py-2 border text-left">Delete</th>
        </tr>
      </thead>

      <!-- Table Body -->
      <tbody>
        <!-- Loading Content -->
        <ng-container *ngIf="loading; else content">
          <tr>
            <td colspan="5" class="px-4 py-2 text-center">Loading...</td>
          </tr>
        </ng-container>

        <!-- Blog List Items -->
        <ng-template #content>
          <ng-container *ngFor="let slide of itemList; let i = index">
            <tr>
              <td class="px-4 py-2 border">{{ i + 1 }}</td>
              <td class="px-4 py-2 border">{{ slide.name }}</td>
              <td class="px-4 py-2 border">
                <a href="{{ Media + '/' + slide.blogImage }}" target="_blank">
                  <img
                    class="object-cover h-24 w-24"
                    [defaultImage]="'../assets/img/default.png'"
                    [lazyLoad]="getLazyLoadImagePath(slide.blogImage)"
                    alt="{{ slide.name }}"
                    [style.filter]="slide.loading ? 'blur(20px)' : 'none'"
                    (load)="imageLoaded(slide)"
                  />
                </a>
              </td>
              <td class="px-4 py-2 border">{{ slide.isFeature }}</td>
              <td class="px-4 py-2 border">
                <button
                  class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded"
                  (click)="populateFormForUpdate(slide)"
                >
                  Update
                </button>
              </td>
              <td class="px-4 py-2 border">
                <button
                  class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                  (click)="deleteBlog(slide._id)"
                >
                  Delete
                </button>
              </td>
            </tr>
          </ng-container>
        </ng-template>
      </tbody>
    </table>
  </div>
</div>
